;             
CREATE USER IF NOT EXISTS "" SALT '' HASH '' ADMIN;           
CREATE USER IF NOT EXISTS ROOT SALT 'eed89a9e45cbe153' HASH 'dfeff67a44c88dab302d3e71eb033b27bc51b94f6c81b579c61ede552d507009' ADMIN;         
CREATE SCHEMA IF NOT EXISTS LVIV AUTHORIZATION "";            
CREATE SEQUENCE LVIV.SYSTEM_SEQUENCE_4740355A_BFAE_4F1E_B9C6_80DEDD87C244 START WITH 1 BELONGS_TO_TABLE;      
CREATE SEQUENCE LVIV.SYSTEM_SEQUENCE_2A08AEDE_51B4_4418_887D_8D84F9F20848 START WITH 3 BELONGS_TO_TABLE;      
CREATE SEQUENCE LVIV.SYSTEM_SEQUENCE_7673572B_E411_4639_87AE_55A3D08B9944 START WITH 5 BELONGS_TO_TABLE;      
CREATE SEQUENCE LVIV.SYSTEM_SEQUENCE_DE11B891_CF74_4124_AFA7_2C7498078821 START WITH 4 BELONGS_TO_TABLE;      
CREATE SEQUENCE LVIV.SYSTEM_SEQUENCE_6978E8A1_ACF5_4DA3_8875_EEBD229642E0 START WITH 5 BELONGS_TO_TABLE;      

CREATE CACHED TABLE LVIV.AUTHOR_BOOK(
    AUTHORID INT NOT NULL,
    BOOKID INT NOT NULL
);
-- 3 +/- SELECT COUNT(*) FROM LVIV.AUTHOR_BOOK;               
INSERT INTO LVIV.AUTHOR_BOOK(AUTHORID, BOOKID) VALUES
(1, 1),
(2, 2),
(3, 2);              
CREATE CACHED TABLE LVIV.AUTHORS(
    AUTHORID INT DEFAULT (NEXT VALUE FOR LVIV.SYSTEM_SEQUENCE_DE11B891_CF74_4124_AFA7_2C7498078821) NOT NULL NULL_TO_DEFAULT SEQUENCE LVIV.SYSTEM_SEQUENCE_DE11B891_CF74_4124_AFA7_2C7498078821,
    NAME VARCHAR(255) NOT NULL
);       
ALTER TABLE LVIV.AUTHORS ADD CONSTRAINT LVIV.CONSTRAINT_4 PRIMARY KEY(AUTHORID);              
-- 3 +/- SELECT COUNT(*) FROM LVIV.AUTHORS;   
INSERT INTO LVIV.AUTHORS(AUTHORID, NAME) VALUES
(1, 'Alan Beaulieu'),
(2, 'Scott Chacon'),
(3, 'Ben Straub');              
CREATE UNIQUE INDEX LVIV.AUTHORS_NAME_UINDEX ON LVIV.AUTHORS(NAME);           
CREATE CACHED TABLE LVIV.CATEGORY(
    CATEGORYID INT DEFAULT (NEXT VALUE FOR LVIV.SYSTEM_SEQUENCE_7673572B_E411_4639_87AE_55A3D08B9944) NOT NULL NULL_TO_DEFAULT SEQUENCE LVIV.SYSTEM_SEQUENCE_7673572B_E411_4639_87AE_55A3D08B9944,
    CATEGORY VARCHAR(255) NOT NULL
);
ALTER TABLE LVIV.CATEGORY ADD CONSTRAINT LVIV.CONSTRAINT_31 PRIMARY KEY(CATEGORYID);          
-- 4 +/- SELECT COUNT(*) FROM LVIV.CATEGORY;  
INSERT INTO LVIV.CATEGORY(CATEGORYID, CATEGORY) VALUES
(1, 'SQL'),
(2, 'Relational DB'),
(3, 'Git'),
(4, 'VCS');          
CREATE UNIQUE INDEX LVIV.CATEGORY_CATEGORY_UINDEX ON LVIV.CATEGORY(CATEGORY); 
CREATE CACHED TABLE LVIV.ISBN(
    ISBNID INT DEFAULT (NEXT VALUE FOR LVIV.SYSTEM_SEQUENCE_6978E8A1_ACF5_4DA3_8875_EEBD229642E0) NOT NULL NULL_TO_DEFAULT SEQUENCE LVIV.SYSTEM_SEQUENCE_6978E8A1_ACF5_4DA3_8875_EEBD229642E0,
    BOOKID INT NOT NULL,
    LANGUAGE CHAR(4) NOT NULL,
    NUMBER VARCHAR(13) NOT NULL,
    TYPE CHAR(2) NOT NULL,
    TRANSLATION BOOLEAN NOT NULL
);  
ALTER TABLE LVIV.ISBN ADD CONSTRAINT LVIV.CONSTRAINT_2 PRIMARY KEY(ISBNID);   
-- 4 +/- SELECT COUNT(*) FROM LVIV.ISBN;      
INSERT INTO LVIV.ISBN(ISBNID, BOOKID, LANGUAGE, NUMBER, TYPE, TRANSLATION) VALUES
(1, 1, 'UA', '9785496017633', '13', TRUE),
(2, 1, 'EN', '9781484200773', '13', FALSE),
(3, 2, 'RU', '9785496017633', '13', TRUE),
(4, 2, 'EN', '9781484200733', '13', FALSE);           
CREATE CACHED TABLE LVIV.BOOK_CATEGORY(
    BOOKID INT NOT NULL,
    CATEGORYID INT NOT NULL
);            
-- 4 +/- SELECT COUNT(*) FROM LVIV.BOOK_CATEGORY;             
INSERT INTO LVIV.BOOK_CATEGORY(BOOKID, CATEGORYID) VALUES
(1, 1),
(1, 2),
(2, 3),
(2, 4); 
CREATE CACHED TABLE LVIV.BOOKS(
    BOOKID INT DEFAULT (NEXT VALUE FOR LVIV.SYSTEM_SEQUENCE_2A08AEDE_51B4_4418_887D_8D84F9F20848) NOT NULL NULL_TO_DEFAULT SEQUENCE LVIV.SYSTEM_SEQUENCE_2A08AEDE_51B4_4418_887D_8D84F9F20848,
    TITLE VARCHAR(255) NOT NULL,
    PUBLISHING VARCHAR(255) NOT NULL,
    YEAROFPUBLISHING VARCHAR(4) NOT NULL,
    NUMBEROFPAGE SMALLINT NOT NULL,
    PRICE DOUBLE NOT NULL,
    DESCRIPTION TEXT
);
ALTER TABLE LVIV.BOOKS ADD CONSTRAINT LVIV.CONSTRAINT_3 PRIMARY KEY(BOOKID);  
-- 2 +/- SELECT COUNT(*) FROM LVIV.BOOKS;     
INSERT INTO LVIV.BOOKS(BOOKID, TITLE, PUBLISHING, YEAROFPUBLISHING, NUMBEROFPAGE, PRICE, DESCRIPTION) VALUES
(1, 'Learn SQL', 'O''Relly', '2007', 310, 100.0, STRINGDECODE('\u041a\u043d\u0438\u0433\u0430 \u0410\u043b\u0430\u043d\u0430 \u0411\u044c\u044e\u043b\u0438, \u044d\u043a\u0441\u043f\u0435\u0440\u0442\u0430 \u043f\u043e \u044f\u0437\u044b\u043a\u0443 SQL, - \u043f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u044b\u0439 \u0443\u0447\u0435\u0431\u043d\u0438\u043a \u0434\u043b\u044f \u0442\u0435\u0445, \u043a\u0442\u043e \u0435\u0449\u0435 \u043d\u0435 \u0437\u043d\u0430\u0435\u0442, \u043d\u043e \u0445\u043e\u0447\u0435\u0442 \u043e\u0441\u0432\u043e\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u044f\u0437\u044b\u043a. \u041a\u043d\u0438\u0433\u0430 \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u0438\u0442 \u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0441\u0442\u0438 \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u043d\u0430\u043d\u0438\u044f, \u043d\u043e \u0438 \u0440\u0430\u0441\u0441\u043a\u0430\u0436\u0435\u0442 \u043e \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0447\u0430\u0441\u0442\u043e \u0443\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u044f\u0435\u043c\u044b\u0445 \u043c\u043e\u0449\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u0445 \u044f\u0437\u044b\u043a\u0430 SQL, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0445 \u043e\u043f\u044b\u0442\u043d\u044b\u043c\u0438 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0441\u0442\u0430\u043c\u0438.')),
(2, STRINGDECODE('Git \u0434\u043b\u044f \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043e\u0433\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0441\u0442\u0430'), STRINGDECODE('\u041f\u0438\u0442\u0435\u0440'), '2016', 496, 212.45, STRINGDECODE('\u042d\u0442\u0430 \u043a\u043d\u0438\u0433\u0430 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u0431\u043e\u0439 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0435 \u0440\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e \u043f\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044e Git \u0432 \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u0445. \u0421 \u0442\u0435\u0445 \u043f\u043e\u0440 \u043a\u0430\u043a \u043f\u0440\u043e\u0435\u043a\u0442 Git \u2014 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u0435\u0440\u0441\u0438\u044f\u043c\u0438 \u2014 \u0431\u044b\u043b \u0441\u043e\u0437\u0434\u0430\u043d \u041b\u0438\u043d\u0443\u0441\u043e\u043c \u0422\u043e\u0440\u0432\u0430\u043b\u044c\u0434\u0441\u043e\u043c, \u043f\u0440\u043e\u0448\u043b\u043e \u043c\u043d\u043e\u0433\u043e \u043b\u0435\u0442, \u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u0430 Git \u043f\u0440\u0435\u0432\u0440\u0430\u0442\u0438\u043b\u0430\u0441\u044c \u0432 \u0434\u043e\u043c\u0438\u043d\u0438\u0440\u0443\u044e\u0449\u0443\u044e \u0441\u0438\u0441\u0442\u0435\u043c\u0443 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044f \u0432\u0435\u0440\u0441\u0438\u0439, \u043a\u0430\u043a \u0434\u043b\u044f \u043a\u043e\u043c\u043c\u0435\u0440\u0447\u0435\u0441\u043a\u0438\u0445 \u0446\u0435\u043b\u0435\u0439, \u0442\u0430\u043a \u0438 \u0434\u043b\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432 \u0441 \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u043c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u043c \u043a\u043e\u0434\u043e\u043c'));               
ALTER TABLE LVIV.AUTHOR_BOOK ADD CONSTRAINT LVIV.AUTHOR_BOOK_BOOKS_BOOKID_FK FOREIGN KEY(BOOKID) REFERENCES LVIV.BOOKS(BOOKID) NOCHECK;       
ALTER TABLE LVIV.BOOK_CATEGORY ADD CONSTRAINT LVIV.BOOK_CATEGORY_CATEGORY_CATEGORYID_FK FOREIGN KEY(CATEGORYID) REFERENCES LVIV.CATEGORY(CATEGORYID) NOCHECK; 
ALTER TABLE LVIV.BOOK_CATEGORY ADD CONSTRAINT LVIV.BOOK_CATEGORY_BOOKS_BOOKID_FK FOREIGN KEY(BOOKID) REFERENCES LVIV.BOOKS(BOOKID) NOCHECK;   
ALTER TABLE LVIV.AUTHOR_BOOK ADD CONSTRAINT LVIV.AUTHOR_BOOK_AUTHORS_AUTHORID_FK FOREIGN KEY(AUTHORID) REFERENCES LVIV.AUTHORS(AUTHORID) NOCHECK;             
ALTER TABLE LVIV.ISBN ADD CONSTRAINT LVIV.ISBN_BOOKS_BOOKID_FK FOREIGN KEY(BOOKID) REFERENCES LVIV.BOOKS(BOOKID) NOCHECK;     
